
<!DOCTYPE html>
<html lang="uk" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–î–ö ¬´–•–æ—Ä—ñ—à–∫–∏¬ª ‚Äî –ê—Ñ—ñ—à–∞, –ø–æ–¥—ñ—ó, –∫–æ–Ω—Ç–∞–∫—Ç–∏</title>
  <meta name="description" content="–û—Ñ—ñ—Ü—ñ–π–Ω–∏–π —Å–∞–π—Ç –î–ö ¬´–•–æ—Ä—ñ—à–∫–∏¬ª. –ê—Ñ—ñ—à–∞ –ø–æ–¥—ñ–π, –Ω–æ–≤–∏–Ω–∏, –∫–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –æ—Ä–µ–Ω–¥–∞ –∑–∞–ª—É.">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#2151d1">
  <link rel="preconnect" href="https://images.unsplash.com" crossorigin>
  <link rel="preconnect" href="https://docs.google.com" crossorigin>
  <link rel="canonical" href="https://YOUR_USERNAME.github.io/YOUR_REPO/">
  <meta property="og:url" content="https://YOUR_USERNAME.github.io/YOUR_REPO/">
  <meta property="og:title" content="–î–ö ¬´–•–æ—Ä—ñ—à–∫–∏¬ª ‚Äî –ê—Ñ—ñ—à–∞ —Ç–∞ –ø–æ–¥—ñ—ó">
  <meta property="og:description" content="–ö—É–ª—å—Ç—É—Ä–Ω—ñ –ø–æ–¥—ñ—ó, –∫–æ–Ω—Ü–µ—Ä—Ç–∏ —Ç–∞ –≥—É—Ä—Ç–∫–∏ —É –•–æ—Ä—ñ—à–∫–∞—Ö.">
  <meta property="og:image" content="https://images.unsplash.com/photo-1540575467063-178a50c2df87?q=80&w=1200&auto=format&fit=crop">
  <meta name="twitter:card" content="summary_large_image">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #0b1220;
      --panel: #0f172a;
      --text: #e6ecff;
      --muted: #9fb3d5;
      --brand: #2151d1;
      --brand-2:#3aa6ff;
      --ring: 0 0 0 2px rgba(58,166,255,.35), 0 10px 30px rgba(33,81,209,.25);
    }
    [data-theme="light"]{
      --bg: #f5f7ff;
      --panel: #ffffff;
      --text: #0f172a;
      --muted: #475569;
      --brand: #2151d1;
      --brand-2:#3aa6ff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--text);}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;height:auto;display:block}
    .container{max-width:1100px;margin:0 auto;padding:0 20px}
    header{
      position:sticky;top:0;z-index:50;background:linear-gradient(180deg, rgba(11,18,32,.9), rgba(11,18,32,.6));
      backdrop-filter: blur(8px); border-bottom:1px solid rgba(255,255,255,.08);
    }
    .nav{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:14px 0}
    .logo{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .logo-badge{width:34px;height:34px;border-radius:10px;background:linear-gradient(135deg,var(--brand),var(--brand-2));display:grid;place-items:center;color:#fff;font-weight:800}
    .nav-links{display:flex;gap:16px;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:10px;border:1px solid rgba(255,255,255,.15);padding:10px 14px;border-radius:12px;transition:.2s;cursor:pointer}
    .btn:hover{transform:translateY(-1px);box-shadow:var(--ring)}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));border:0;color:#fff}
    .theme-toggle{border:1px solid rgba(255,255,255,.15);padding:8px 10px;border-radius:10px;cursor:pointer}
    /* Hero */
    .hero{position:relative;overflow:hidden}
    .hero .bg{
      position:absolute;inset:0;
      background-image:url('https://images.unsplash.com/photo-1540575467063-178a50c2df87?q=80&w=1800&auto=format&fit=crop');
      background-size:cover;background-position:center;
      filter:brightness(.55) saturate(1.1);
    }
    .hero .overlay{position:absolute;inset:0;background:radial-gradient(50% 70% at 50% 20%, rgba(58,166,255,.35), transparent),linear-gradient(180deg, rgba(11,18,32,.0), var(--bg) 85%);}
    .hero .inner{position:relative;padding:96px 0 40px}
    .headline{font-size:clamp(28px,4vw,46px);line-height:1.1;font-weight:800;letter-spacing:.2px}
    .sub{color:var(--muted);max-width:720px}
    .cta{display:flex;gap:12px;margin-top:18px;flex-wrap:wrap}
    /* Sections */
    section{scroll-margin-top:80px;padding:40px 0}
    h2{font-size:clamp(22px,3.4vw,30px);margin:0 0 18px 0}
    .panel{background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:16px}
    /* Events */
    .filters{display:grid;grid-template-columns:1fr 160px 160px auto;gap:10px;margin-bottom:14px}
    .filters input,.filters select{width:100%;border:1px solid rgba(255,255,255,.15);background:transparent;color:inherit;padding:10px 12px;border-radius:12px;outline:0}
    .filters input:focus,.filters select:focus{box-shadow:var(--ring)}
    .events{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media (max-width:920px){.events{grid-template-columns:repeat(2,1fr)}.filters{grid-template-columns:1fr 1fr}}
    @media (max-width:560px){.events{grid-template-columns:1fr}.nav-links{display:none}}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.00));border:1px solid rgba(255,255,255,.08);border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
    .card-img{aspect-ratio:16/9;background:#0b1220;overflow:hidden}
    .card-body{padding:12px}
    .tag{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:var(--muted);border:1px solid rgba(255,255,255,.15);border-radius:999px;padding:4px 8px}
    .card-actions{display:flex;gap:8px;margin-top:auto;padding:12px}
    .card-actions .btn{flex:1;justify-content:center}
    /* Map & gallery */
    .map{border:0;width:100%;height:340px;border-radius:16px}
    .gallery{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    @media (max-width:800px){.gallery{grid-template-columns:repeat(2,1fr)}}
    .gallery a{border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.1)}
    /* Lightbox */
    dialog.lightbox{border:0;padding:0;background:rgba(0,0,0,.9);width:100%;height:100%}
    dialog::backdrop{background:rgba(0,0,0,.85)}
    .lightbox img{max-width:92vw;max-height:86vh;margin:auto;display:block}
    /* Footer */
    footer{border-top:1px solid rgba(255,255,255,.08);padding:24px 0;color:var(--muted)}
    /* A11y & motion */
    :focus-visible{outline:2px solid var(--brand-2);outline-offset:2px}
    @media (prefers-reduced-motion: reduce){*{animation:none!important;transition:none!important;scroll-behavior:auto!important}}
  </style>
</head>
<body>
  <a class="skip-link" href="#afisha">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –¥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É</a>
  <header>
    <div class="container nav">
      <div class="logo"><div class="logo-badge">–î–ö</div> –î–ö ¬´–•–æ—Ä—ñ—à–∫–∏¬ª</div>
      <nav class="nav-links">
        <a href="#afisha" class="btn">–ê—Ñ—ñ—à–∞</a>
        <a href="#contacts" class="btn">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
        <a href="#map" class="btn">–õ–æ–∫–∞—Ü—ñ—è</a>
        <button id="themeBtn" class="theme-toggle" aria-label="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É">üåì</button>
        <a class="btn primary" href="#contactForm">–ó–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏ –∑–∞–ª</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="bg" aria-hidden="true"></div>
    <div class="overlay"></div>
    <div class="container inner">
      <h1 class="headline">–ü–æ–¥—ñ—ó, —â–æ –æ–±‚Äô—î–¥–Ω—É—é—Ç—å –≥—Ä–æ–º–∞–¥—É</h1>
      <p class="sub">–ö–æ–Ω—Ü–µ—Ä—Ç–∏, –∫—ñ–Ω–æ, –≥—É—Ä—Ç–∫–∏ —Ç–∞ —Å–≤—è—Ç–∞ –≤ —Å–µ—Ä—Ü—ñ –Ω–∞—à–æ–≥–æ —Å–µ–ª–∞. –û–±–∏—Ä–∞–π—Ç–µ, –±—Ä–æ–Ω—é–π—Ç–µ ‚Äî —ñ –ø—Ä–∏—Ö–æ–¥—å—Ç–µ –∑ —Ä–æ–¥–∏–Ω–æ—é —Ç–∞ –¥—Ä—É–∑—è–º–∏!</p>
      <div class="cta">
        <a href="#afisha" class="btn primary">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∞—Ñ—ñ—à—É</a>
        <a href="#contacts" class="btn">–ù–∞–ø–∏—Å–∞—Ç–∏ –Ω–∞–º</a>
      </div>
    </div>
  </section>

  <section id="afisha">
    <div class="container">
      <h2>–ê—Ñ—ñ—à–∞</h2>
      <div class="panel">
        <div class="filters">
          <input id="q" type="search" placeholder="–ü–æ—à—É–∫ –ø–æ–¥—ñ–π (–Ω–∞–∑–≤–∞, –æ–ø–∏—Å)‚Ä¶" aria-label="–ü–æ—à—É–∫">
          <input id="from" type="date" aria-label="–í—ñ–¥ –¥–∞—Ç–∏">
          <select id="category" aria-label="–ö–∞—Ç–µ–≥–æ—Ä—ñ—è">
            <option value="">–£—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó</option>
            <option>–ö–æ–Ω—Ü–µ—Ä—Ç</option>
            <option>–ö—ñ–Ω–æ</option>
            <option>–ì—É—Ä—Ç–æ–∫</option>
            <option>–°–≤—è—Ç–æ</option>
          </select>
          <button id="reset" class="btn" type="button">–°–∫–∏–Ω—É—Ç–∏</button>
        </div>
        <div id="events" class="events" role="list"></div>
        <div id="empty" style="display:none;color:var(--muted);padding:10px">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –ø–æ–¥—ñ–π –∑–∞ –≤–∞—à–∏–º —Ñ—ñ–ª—å—Ç—Ä–æ–º.</div>
      </div>
    </div>
  </section>

  <section id="gallery">
    <div class="container">
      <h2>–ì–∞–ª–µ—Ä–µ—è</h2>
      <div class="gallery">
        <a href="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=1600&auto=format&fit=crop" class="gl">
          <img loading="lazy" decoding="async" alt="–°—Ü–µ–Ω–∞" src="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=600&auto=format&fit=crop">
        </a>
        <a href="https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?q=80&w=1600&auto=format&fit=crop" class="gl">
          <img loading="lazy" decoding="async" alt="–ó–∞–ª" src="https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?q=80&w=600&auto=format&fit=crop">
        </a>
        <a href="https://images.unsplash.com/photo-1540030521459-3c041aa4b7f2?q=80&w=1600&auto=format&fit=crop" class="gl">
          <img loading="lazy" decoding="async" alt="–°–≤—è—Ç–æ" src="https://images.unsplash.com/photo-1540030521459-3c041aa4b7f2?q=80&w=600&auto=format&fit=crop">
        </a>
        <a href="https://images.unsplash.com/photo-1521336575822-6da63fb45455?q=80&w=1600&auto=format&fit=crop" class="gl">
          <img loading="lazy" decoding="async" alt="–ì—É—Ä—Ç–æ–∫" src="https://images.unsplash.com/photo-1521336575822-6da63fb45455?q=80&w=600&auto=format&fit=crop">
        </a>
      </div>
    </div>
    <dialog id="lightbox" class="lightbox"><img alt=""><form method="dialog"><button class="btn" style="position:fixed;right:16px;top:16px">–ó–∞–∫—Ä–∏—Ç–∏</button></form></dialog>
  </section>

  <section id="map">
    <div class="container">
      <h2>–î–µ –º–∏ –∑–Ω–∞—Ö–æ–¥–∏–º–æ—Å—å</h2>
      <div class="panel">
        <iframe class="map" loading="lazy" allowfullscreen referrerpolicy="no-referrer-when-downgrade"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d10101.0!2d33.0!3d49.0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2z0KXQvtC70LHQtdC60LAg0JrRgNC10LHQsNC30LjRjw!5e0!3m2!1suk!2sua!4v1680000000000">
        </iframe>
        <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
          <a class="btn" target="_blank" rel="noopener noreferrer"
             href="https://www.google.com/maps/dir/?api=1&destination=–î–ö%20–•–æ—Ä—ñ—à–∫–∏">–ü—Ä–æ–∫–ª–∞—Å—Ç–∏ –º–∞—Ä—à—Ä—É—Ç</a>
          <a class="btn" target="_blank" rel="noopener noreferrer"
             href="https://maps.apple.com/?q=–î–ö%20–•–æ—Ä—ñ—à–∫–∏">–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ Apple Maps</a>
        </div>
      </div>
    </div>
  </section>

  <section id="contacts">
    <div class="container">
      <h2>–ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</h2>
      <div class="panel" id="contactForm">
        <form action="https://formspree.io/f/YOUR_FORMSPREE_ID" method="POST">
          <input type="text" name="_honey" style="display:none">
          <input type="hidden" name="_subject" value="–ó–∞—è–≤–∫–∞ –∑ —Å–∞–π—Ç—É –î–ö ¬´–•–æ—Ä—ñ—à–∫–∏¬ª">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
            <div>
              <label>–í–∞—à–µ —ñ–º‚Äô—è</label>
              <input name="name" required style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:transparent;color:inherit">
            </div>
            <div>
              <label>–¢–µ–ª–µ—Ñ–æ–Ω –∞–±–æ email</label>
              <input name="contact" required style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:transparent;color:inherit">
            </div>
          </div>
          <label style="display:block;margin-top:10px">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</label>
          <textarea name="message" required rows="4" style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:transparent;color:inherit"></textarea>
          <div class="cta" style="margin-top:10px">
            <button class="btn primary" type="submit">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
            <a class="btn" href="mailto:dk.horyshky@example.com">–ù–∞–ø–∏—Å–∞—Ç–∏ –Ω–∞ e‚Äëmail</a>
            <a class="btn" href="tel:+380000000000">–ü–æ–¥–∑–≤–æ–Ω–∏—Ç–∏</a>
          </div>
        </form>
      </div>
    </div>
  </section>

  <footer>
    <div class="container" style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div>¬© <span id="year"></span> –î–ö ¬´–•–æ—Ä—ñ—à–∫–∏¬ª. –£—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω–æ.</div>
      <div style="display:flex;gap:8px">
        <a class="btn" target="_blank" rel="noopener noreferrer" href="https://t.me/">Telegram</a>
        <a class="btn" target="_blank" rel="noopener noreferrer" href="https://facebook.com/">Facebook</a>
      </div>
    </div>
  </footer>

  <script>
    // Theme toggle
    const root = document.documentElement;
    const savedTheme = localStorage.getItem('theme');
    if(savedTheme) root.setAttribute('data-theme', savedTheme);
    document.getElementById('themeBtn').addEventListener('click', () => {
      const next = root.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      root.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });

    // Lightbox
    const lb = document.getElementById('lightbox');
    document.querySelectorAll('.gl').forEach(a=>{
      a.addEventListener('click', e=>{
        e.preventDefault();
        lb.querySelector('img').src = a.href;
        lb.showModal();
      });
    });

    // Events data: CSV or window.events
    const EVENTS_CSV_URL = ""; // <- –≤—Å—Ç–∞–≤—å —Å—é–¥–∏ –ø—É–±–ª—ñ—á–Ω–∏–π CSV Google Sheets –∞–±–æ –∑–∞–ª–∏—à –±–µ–∑ –∑–º—ñ–Ω, —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à window.events
    const fallbackEvents = [
      { Title: "–ö–æ–Ω—Ü–µ—Ä—Ç –¥–æ –î–Ω—è —Å–µ–ª–∞", Date: "2025-11-15", Time: "18:00", Category: "–ö–æ–Ω—Ü–µ—Ä—Ç", Description: "–°–≤—è—Ç–∫–æ–≤–∏–π –≤–∏—Å—Ç—É–ø –º—ñ—Å—Ü–µ–≤–∏—Ö –∫–æ–ª–µ–∫—Ç–∏–≤—ñ–≤.", Price: "–í—Ö—ñ–¥ –≤—ñ–ª—å–Ω–∏–π" },
      { Title: "–ö—ñ–Ω–æ-–≤–µ—á—ñ—Ä", Date: "2025-11-20", Time: "19:00", Category: "–ö—ñ–Ω–æ", Description: "–°—ñ–º–µ–π–Ω–∏–π —Ñ—ñ–ª—å–º —É –≤–µ–ª–∏–∫–æ–º—É –∑–∞–ª—ñ.", Price: "50 –≥—Ä–Ω" },
      { Title: "–ú–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å –∑ –º–∞–ª—é–≤–∞–Ω–Ω—è", Date: "2025-11-22", Time: "14:00", Category: "–ì—É—Ä—Ç–æ–∫", Description: "–î–ª—è –¥—ñ—Ç–µ–π 7‚Äì12 —Ä–æ–∫—ñ–≤.", Price: "–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ" }
    ];

    const qs = s => document.querySelector(s);
    const qsa = s => Array.from(document.querySelectorAll(s));

    function csvToJson(text){
      const lines = text.replace(/^\uFEFF/, '').split(/\r?\n/).filter(Boolean);
      const head = lines.shift().split(',').map(s=>s.trim());
      return lines.map(l => {
        const cols = []; let cur = '', inQ = false;
        for(let i=0;i<l.length;i++){
          const ch = l[i];
          if(ch === '"'){ inQ = !inQ; continue; }
          if(ch === ',' && !inQ){ cols.push(cur); cur=''; continue; }
          cur += ch;
        }
        cols.push(cur);
        const obj = {};
        head.forEach((h,idx)=>obj[h]= (cols[idx]||'').trim());
        return obj;
      });
    }

    async function loadEvents(){
      try{
        if(Array.isArray(window.events)) return window.events;
        if(EVENTS_CSV_URL){
          const res = await fetch(EVENTS_CSV_URL, {cache:'no-store'});
          if(!res.ok) throw new Error('HTTP '+res.status);
          return csvToJson(await res.text());
        }
      }catch(e){ console.warn('CSV load failed', e); }
      return fallbackEvents;
    }

    function render(events){
      const q = qs('#q').value.toLowerCase();
      const from = qs('#from').value ? new Date(qs('#from').value) : null;
      const cat = qs('#category').value;
      const list = qs('#events');
      const empty = qs('#empty');
      list.innerHTML = '';

      const filtered = events.filter(ev => {
        const text = (ev.Title||'') + ' ' + (ev.Description||'');
        const okQ = !q || text.toLowerCase().includes(q);
        const okC = !cat || (ev.Category||'').toLowerCase() === cat.toLowerCase();
        const d = ev.Date ? new Date(ev.Date) : null;
        const okD = !from || (d && d >= from);
        return okQ && okC && okD;
      });

      empty.style.display = filtered.length ? 'none' : 'block';

      filtered.sort((a,b)=> (a.Date||'').localeCompare(b.Date||''));

      for(const ev of filtered){
        const img = "https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=800&auto=format&fit=crop";
        const date = ev.Date || '';
        const time = ev.Time || '';
        const title = ev.Title || '–ü–æ–¥—ñ—è';
        const cat = ev.Category || '–ü–æ–¥—ñ—è';
        const desc = ev.Description || '';
        const price = ev.Price || '';
        const card = document.createElement('article');
        card.className = 'card';
        card.setAttribute('role','listitem');
        card.innerHTML = `
          <div class="card-img"><img loading="lazy" decoding="async" alt="${title}" src="${img}"></div>
          <div class="card-body">
            <div style="display:flex;justify-content:space-between;gap:8px;align-items:center;margin-bottom:6px">
              <span class="tag">üìÖ ${date}${time? ' ¬∑ '+time:''}</span>
              <span class="tag">üè∑ ${cat}</span>
            </div>
            <h3 style="margin:6px 0 8px 0;font-size:18px">${title}</h3>
            <p style="margin:0;color:var(--muted)">${desc}</p>
            ${price? `<p style="margin:8px 0 0 0;color:var(--muted)"><b>–í–∞—Ä—Ç—ñ—Å—Ç—å:</b> ${price}</p>`:''}
          </div>
          <div class="card-actions">
            <button class="btn" type="button">–î–æ–¥–∞—Ç–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä</button>
            <button class="btn" type="button">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å</button>
          </div>
        `;
        const [btnIcs, btnShare] = card.querySelectorAll('.btn');
        btnIcs.addEventListener('click', ()=> downloadICS(ev));
        btnShare.addEventListener('click', ()=> shareEvent(ev));
        list.appendChild(card);
      }
    }

    function pad(n){ return String(n).padStart(2,'0'); }
    function toICSDate(dateStr, timeStr){
      // returns local "floating" time as YYYYMMDDTHHMMSS
      const d = new Date(dateStr + (timeStr? 'T'+timeStr : 'T09:00'));
      return d.getFullYear()+pad(d.getMonth()+1)+pad(d.getDate())+'T'+pad(d.getHours())+pad(d.getMinutes())+'00';
    }
    function downloadICS(ev){
      const dtstart = toICSDate(ev.Date, ev.Time);
      const dtend = toICSDate(ev.Date, ev.Time ? ev.Time : "10:30");
      const uid = Date.now()+'@dk-horyshky';
      const ics = [
        'BEGIN:VCALENDAR','VERSION:2.0','PRODID:-//DK Horyshky//UA',
        'BEGIN:VEVENT',
        'UID:'+uid,
        'DTSTAMP:'+dtstart,
        'DTSTART:'+dtstart,
        'DTEND:'+dtend,
        'SUMMARY:'+ (ev.Title||'–ü–æ–¥—ñ—è'),
        'DESCRIPTION:'+ (ev.Description||''),
        'LOCATION:–î–ö ¬´–•–æ—Ä—ñ—à–∫–∏¬ª',
        'END:VEVENT','END:VCALENDAR'
      ].join('\r\n');
      const blob = new Blob([ics], {type:'text/calendar;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'event.ics';
      document.body.appendChild(a); a.click();
      setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 1000);
    }
    async function shareEvent(ev){
      const text = `${ev.Title||'–ü–æ–¥—ñ—è'} ‚Äî ${ev.Date||''} ${ev.Time||''} —É –î–ö ¬´–•–æ—Ä—ñ—à–∫–∏¬ª.`;
      const shareData = { title: '–î–ö ¬´–•–æ—Ä—ñ—à–∫–∏¬ª', text, url: location.href+'#afisha' };
      if(navigator.share){
        try{ await navigator.share(shareData); }catch{}
      }else{
        await navigator.clipboard.writeText(shareData.url + "\n" + text);
        alert('–ü–æ—Å–∏–ª–∞–Ω–Ω—è —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!');
      }
    }

    // Filters
    ['q','from','category'].forEach(id => qs('#'+id).addEventListener('input', ()=> render(window.__events||[])));
    qs('#reset').addEventListener('click', ()=>{
      qs('#q').value=''; qs('#from').value=''; qs('#category').value='';
      render(window.__events||[]);
    });

    // Service worker
    if('serviceWorker' in navigator){ navigator.serviceWorker.register('service-worker.js').catch(()=>{}); }

    // Init
    document.getElementById('year').textContent = new Date().getFullYear();
    loadEvents().then(list => { window.__events = list; render(list); });
  </script>
</body>
</html>
